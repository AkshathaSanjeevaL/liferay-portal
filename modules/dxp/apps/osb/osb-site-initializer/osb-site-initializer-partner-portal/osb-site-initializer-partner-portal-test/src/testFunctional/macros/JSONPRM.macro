definition {
    macro createMDFRequest {
        var totalCostOfExpense = 0;

        if(!(isSet(userEmailAddress))) {
			var userEmailAddress = "test@liferay.com";
		}

		if(!(isSet(accountEntryName))) {
			var accountEntryName = "Company Name 1";
		}

        if (!(isSet(startDate))) {
			var startDate = DateUtil.getFormattedDate("+1", "yyyy-MM-dd");
		}

		if (!(isSet(endDate))) {
			var endDate = DateUtil.getFormattedDate("+2", "yyyy-MM-dd");
		}

        if (!(isSet(campaignName))) {
			var campaignName = "Campaign Name";
		}

        if (!(isSet(campaignDescription))) {
			var campaignDescription = "Campaign Description";
		}

        if (!(isSet(goalsOptions))) {
			var goalsOptions = "Thought leadership";
		}

        if (!(isSet(targetMarketOptions))) {
			var targetMarketOptions = "Professional Services (Technical/Web/IT)";
		}

        if (!(isSet(targetRolesOptions))) {
			var targetRolesOptions = "Director/Manager";
		}

        if (!(isSet(activityName))) {
			var activityName = "Activity Name";
		}

        if (!(isSet(activityDescription))) {
			var activityDescription = "Activity Description";
		}
        
        if (!(isSet(expenseOption))) {
			var expenseOption = "Content Creation";
		}

        if (!(isSet(budgetValueList))) {
			var budgetValueList = 1000;
		}

        for (var budget : list "${budgetValueList}") {
			var totalCostOfExpense = MathUtil.sum(${totalCostOfExpense}, ${budget});

            if(isSet(secondBudgetValueList)) {
                for (var budget : list "${secondBudgetValueList}") {
                    var totalCostOfExpense = MathUtil.sum(${totalCostOfExpense}, ${budget});
                }
            }
		}

        var totalMDFRequestAmount = MathUtil.quotient("${totalCostOfExpense}", "2");
        
        var requestId = JSONPRMAPI.addMDF(
            userEmailAddress = "${userEmailAddress}",
            accountEntryName = "${accountEntryName}",
            endDate = "${endDate}",
            startDate = "${startDate}",
			campaignDescription = "${campaignDescription}",
			campaignName = "${campaignName}",
			goalsOptions = "${goalsOptions}",
			targetMarketOptions = "${targetMarketOptions}",
			targetRolesOptions = "${targetRolesOptions}",
            totalCostOfExpense = ${totalCostOfExpense},
            totalMDFRequestAmount = ${totalMDFRequestAmount});

        var activityId = JSONPRMAPI.addActivity(
            accountEntryName = "${accountEntryName}",
			activityDescription = "${activityDescription}",
			activityName = "${activityName}",
            budgetValue = ${totalCostOfExpense},
            expenseOption = "${expenseOption}",
            startDate = "${startDate}",
            endDate = "${endDate}",
			requestId = ${requestId},
            totalMDFRequestAmount = ${totalMDFRequestAmount});

        for (var budgetValue : list "${budgetValueList}") {
            JSONPRMAPI.addBudget(
                activityId = ${activityId},
                expenseOption = "${expenseOption}",
                budgetValue = ${budgetValue});
        }

        if (isSet(secondActivityName)) {
            var secondTotalCostOfExpense = 0;

            for (var budget : list "${secondBudgetValueList}") {
                var secondTotalCostOfExpense = MathUtil.sum(${secondTotalCostOfExpense}, ${budget});
            }

            var secondTotalMDFRequestAmount = MathUtil.quotient("${secondTotalCostOfExpense}", "2");

            var secondActivityId = JSONPRMAPI.addActivity(
                activityDescription = "${activityDescription}",
                activityName = "${secondActivityName}",
                budgetValue = ${secondTotalCostOfExpense},
                expenseOption = "${expenseOption}",
                startDate = "${startDate}",
                endDate = "${endDate}",
                requestId = ${requestId},
                totalMDFRequestAmount = ${secondTotalMDFRequestAmount});

            for (var secondBudgetValue : list "${secondBudgetValueList}") {
                JSONPRMAPI.addBudget(
                    activityId = ${secondActivityId},
                    expenseOption = "${expenseOption}",
                    budgetValue = ${secondBudgetValue});
            }
         }
    }
}