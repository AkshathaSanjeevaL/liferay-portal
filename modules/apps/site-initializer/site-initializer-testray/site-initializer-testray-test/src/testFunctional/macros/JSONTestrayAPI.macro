definition {
    @summary = "create a build via API"
	macro createBuildAPI {
		Variables.assertDefined(parameterList = "${buildName},${projectId},${routineId},${productVersionId}");

		var portalURL = JSONCompany.getPortalURL();

		if (!(isSet(description))) {
			var description = "";
		}

		if (!(isSet(template))) {
			var template = "";
		}

		if (!(isSet(statusTemplate))) {
			var statusTemplate = "";
		}

		if (!(isSet(gitHash))) {
			var gitHash = "";
		}

		if (!(isSet(buildPromoted))) {
			var buildPromoted = "";
		}

		var curl = '''
			${portalURL}/o/c/builds \
				-u test@liferay.com:test \
                -H 'accept: application/json' \
				-H 'Content-Type: application/json' \
				-d '{
					"description": "${description}",
					"template": "${template}",
					"active": "${statusTemplate}",
					"name": "${buildName}",
					"gitHash": "${gitHash}",
					"promoted": "${buildPromoted}",
					"r_projectToBuilds_c_projectId": "${projectId}",
					"r_routineToBuilds_c_routineId": "${routineId}",
					"r_productVersionToBuilds_c_productVersionId": "${productVersionId}"
				}'
		''';

		var response = JSONCurlUtil.post("${curl}", "$.id");

		echo("${response}");

		return "${response}";
	}

	@summary = "create a Case Result via API"
	macro createCaseResultAPI {
		Variables.assertDefined(parameterList = "${buildId},${casesId},${componentId},${runId}");

		var portalURL = JSONCompany.getPortalURL();

		var curl = '''
			${portalURL}/o/c/caseresults \
				-u test@liferay.com:test \
                -H 'accept: application/json' \
				-H 'Content-Type: application/json' \
				-d '{
					"r_buildToCaseResult_c_buildId": "${buildId}",
					"r_caseToCaseResult_c_caseId": "${casesId}",
					"r_componentToCaseResult_c_componentId": "${componentId}",
					"r_runToCaseResult_c_runId": "${runId}"
				}'

				
		''';

		var response = JSONCurlUtil.post("${curl}", "$.id");

		echo("${response}");

		return "${response}";
	}

	@summary = "create a Case Results For Subtask via API"
	macro createCaseResultsForSubtaskAPI {
		Variables.assertDefined(parameterList = "${name},${caseResultId},${subtaskId}");

		var portalURL = JSONCompany.getPortalURL();

		var curl = '''
			${portalURL}/o/c/subtaskscasesresultses \
				-u test@liferay.com:test \
                -H 'accept: application/json' \
				-H 'Content-Type: application/json' \
				-d '{
					"name": "${name}",
					"r_caseResultToSubtasksCasesResults_c_caseResultId": "${caseResultId}",
					"r_subtaskToSubtasksCasesResults_c_subtaskId": "${subtaskId}"
				}'
		''';

		var response = JSONCurlUtil.post("${curl}", "$.id");

		echo("${response}");

		return "${response}";
	}

	@summary = "create a Case via API"
	macro createCasesAPI {
		Variables.assertDefined(parameterList = "${caseName},${caseTypeId},${componentId},${projectId}");

		if (!(isSet(description))) {
			var description = "";
		}

		if (!(isSet(estimatedDuration))) {
			var estimatedDuration = "";
		}

		if (!(isSet(priority))) {
			var priority = "";
		}

		if (!(isSet(steps))) {
			var steps = "";
		}

		var portalURL = JSONCompany.getPortalURL();

		var curl = '''
			${portalURL}/o/c/cases \
				-u test@liferay.com:test \
                -H 'accept: application/json' \
				-H 'Content-Type: application/json' \
                -d '{
					"name": "${caseName}",
					"description": "${description}",
					"estimatedDuration": "${estimatedDuration}",
					"priority": "${priority}",
					"steps": "${steps}",
					"r_caseTypeToCases_c_caseTypeId": "${caseTypeId}",
					"r_componentToCases_c_componentId": "${componentId}",
					"r_projectToCases_c_projectId": "${projectId}"
				}'
		''';

		var response = JSONCurlUtil.post("${curl}", "$.id");

		echo("${response}");

		return "${response}";
	}

	@summary = "create a Case Type via API"
	macro createCaseTypeAPI {
		Variables.assertDefined(parameterList = "${caseType}");

		var portalURL = JSONCompany.getPortalURL();

		var curl = '''
			${portalURL}/o/c/casetypes \
				-u test@liferay.com:test \
                -H 'accept: application/json' \
				-H 'Content-Type: application/json' \
                -d '{
					"name": "${caseType}"
				}'
		''';

		var response = JSONCurlUtil.post("${curl}", "$.id");

		echo("${response}");

		return "${response}";
	}

}