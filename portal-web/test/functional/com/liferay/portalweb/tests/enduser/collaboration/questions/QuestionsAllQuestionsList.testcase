@component-name = "portal-questions"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Questions";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		JSONLayout.addPublicLayout(
			groupName = "Guest",
			layoutName = "Questions Page");

		JSONLayout.addWidgetToPublicLayout(
			column = 2,
			groupName = "Guest",
			layoutName = "Questions Page",
			widgetName = "Questions");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if (${testPortalInstance} == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Message Boards");

			if (IsElementPresent(locator1 = "Questions#QUESTIONS_LIST")) {
				Questions.tearDown();
			}

			PagesAdmin.tearDownCP();
		}
	}

	@description = "Story ID: LPS-153187 | Test Summary: Verify if the user can create a new Topic."
	@priority = 5
	test CanCreateATopic {
        task ("Given that go to Questions Page") {
            Navigator.openURL();

            ProductMenu.gotoPortlet(
                category = "Site Builder",
                portlet = "Pages");

            PagesAdmin.gotoPageEllipsisMenuItem(
                menuItem = "View",
                pageName = "Questions Page");
        }

        task ("When add a new topic") {
            ScrollWebElementIntoView(
                key_text = "New Topic",
                locator1 = "Button#ANY");

            Button.click(button = "New Topic");

            Questions.addRootTopic(
                rootTopicDescription = "Topic Description",
                rootTopicName = "Topic Name");
        }

        task ("Then can see the topic card created") {
            LexiconCard.viewCardPresent(card = "Topic Name");
        }
	}
}